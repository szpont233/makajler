<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Imperium Lechitów</title>
<style>
    #cwel{
    color: gold;
    }
    #cwel:hover{
    color: white;
    background-color: #003366;
    }
</style>
<link rel="stylesheet" href="assets/css/style.css">
<link rel="icon" type="image/png" href="assets/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="assets/favicon.svg" />
<link rel="shortcut icon" href="assets/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png" />
<link rel="manifest" href="assets/site.webmanifest" />
<meta name="theme-color" content="#fafafa" />
<link rel="mask-icon" href="assets/safari-pinned-tab.svg" color="#c0392b" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
<body>
<h2 id="ciacho">Jeżeli nie bedzie nowych zmian na stronie to usuń ciasteczka</h2>

<div id="header">
    <a href="#" style="margin: auto; padding: 5px;"><div style="border: 1px solid black; padding: 5px; background-color: #c0c0c0;" ><img src="logo.png" alt="logo Lechii" ></div></a>
    <h1>Strona główna</h1>
    <p style="text-shadow: 2px 2px 3px black; color: black;">Tu znajdziesz wszystko.</p>
</div>

<div id="container">
    <div id="menu">
        <a href="#">Strona główna</a> |
        <a href="container/projekty/index.html">Projekty</a> |
        <a href="container/galeria/index.html">Galeria</a> |
        <a href="container/kontakt/index.html">Kontakt</a> |
        <a href="container/swiatynia/index.html">Świątynia</a> |
        <a id="cwel" href="container/guestbook/index.html">Księga wpisów</a>
    </div>

    <div id="logan">
        <p id="czyzal">Status...</p>
        <a id="loginlink" href="register.html" style="text-align: right;">
            <img src="assets/icons/icon_mini_login.gif" height="13" width="12" alt="*">
            Dołącz do Imperium |
        </a>
        <a id="loginlink" href="login.html">
            <img src="#">
            Zaloguj się
        </a>
    </div>

    <div id="main">
        <div id="content">
            <h2>Nowości</h2>
            <p id="nowe"><strong>21 grudnia 2025</strong><br><br>
                 Nudzi mi sie w chuj dajcie jakies propozycje. Dodalem nowy system kont. Juz mozna sie rejestrowac/logowac. Wciaz w fazie beta!! Nie spodziewajcie sie kokosow
            </p>
            <p id="nowe"><strong>19 grudnia 2025</strong><br><br>
            Zrobilem dzialajaca strone do wpisow. Najnowsze wpisy beda wyswietlane na tej stronie glownej (3 kafelek po prawej stronie). Zobacz <a href="container/guestbook/index.html">Ksiege wpisow</a>
            </p>
            <p id="specjal"><strong>17 grudnia 2025</strong><br><br>
            Z dniem 17 grudnia 2025 nasza strona imperiumlechtow.pl oficjalnie zawarla wspolprace z Bożena Boguslawską. Swiadkami zawarcia wspolpracy jest Jeffrey Epstein, Charlie Kirk i George Floyd. Zachecamy do wspolpracowania z nami :-)
            </p>
            <p id="nowe"><strong>12 grudnia 2025</strong><br><br>
            Mala pierdola (kafelki) po prawej stronie. Dodalem byle co bo mi sie tak podoba</p>
            <p id="specjal"><strong>8 grudnia 2025</strong><br><br>
                Szpont mlodziezowym slowem roku!!! Chwala i pozdrowienia dla Wielkiego Igora Szponciciela! <br>
                <img src="assets/szpont_selfie.jpg"></p>
            <p id="nowe"><strong>29 listopada 2025</strong><br><br>
                Zrobilem nowa gre "Twierdza". Wejdz w "Projekty" i obczaj!
            </p>
            <p id="nowe"><strong>28 listopada 2025</strong><br><br>
                Po dlugiej przewie pomyslalem zeby przywrocic to strone do zycia. Za niedlugo wyjdzie cos ciekawego. Cos ala "Stronghold" :) </p>
            <p id="specjal"><strong>03 listopada 2025</strong><br><br>
                Same szpony. no same szponty. zobacz update 1.5 beta Szpontklikera</p>
            <p id="nowe"><strong>28 października 2025</strong><br><br>
            Ulepszono UI strony i dodalem pare drobnostek<br>
            Obczaj tez nowa wersje Szpontklikera BETA w wersji 1.4!!!</p>
            <p id="specjal"><strong>22 października 2025</strong><br> <br>
                <strong>Do tej pory to jest najwiekszy update. Wymieniam w punktach:  <br></strong>
                <strong>1.1</strong>  Jest już dostepna nowa wersja <a href="projekty/makajler/index.html">Szpontoklikera!</a> <br>
                <strong>1.2</strong>  Dodano ulepszenia, sklep i inne funkcje do Szpontoklikera. <br>
                <strong>2.</strong>  Stworzono rownież nowe logo dla naszego Imperium Lechickiego <br>
                <strong>3.</strong>  Dodano dzialajacy formularz ktory automatycznie wysyla golebia z listem do nas. Jest w zakladce <a href="container/kontakt/index.html">Kontakt</a>. <br>
                <strong>4.</strong>  Dodano pare nowych zdjec do galerii. Jak chcecie to wysylajcie na podanego maila. <br>
                A to jest dopiero poczatek. Chawala Imperium
            </p>
            <p id="nowe"><strong>18 października 2025</strong><br> Dodano nową strone glowna i posortowano wszystko na różne kategorie. Pozdrawiam wszystkich Lechitów!</p>
            <p id="nowe"><strong>16 października 2025</strong> <br> Obczaj nowego Szpontoklikera <a href="projekty/makajler/index.html">tutaj</a></p>
            <p id="specjal"><strong>15 października 2025</strong><br> Narodziny Lechistanu w internecie.</p>
            <hr style="border: 0; border-top: 1px solid #aaa; margin: 15px 0;">

            <h2>O nas</h2>
            <p>Jesteśmy potomkami wladcow Imperium Lechickiego i w ramach tego stworzylismy strone internetowa. Zapraszamy.</p>

            <hr style="border: 0; border-top: 1px solid #aaa; margin: 15px 0;">

            <h2>Pobierz</h2>
            <p><a class="button" href="assets/lechia.jpg">Pobierz tapetę (415kB)</a></p>
        </div>

        <div id="sidebar">
            <aside class="infobox">
                <h3>Info ogólne</h3>
                <hr>
                <div id="mlawa-info">Lapanie sygnalu z marsa...</div>
                <p style="text-align:center;">
                    <hr>
                    <b>Odwiedzieliscie nas:</b><br> <script type="text/javascript" src="https://counter.websiteout.com/js/21/8/891/0"></script>  razy.<br><br>
                    <b>Ostatnia aktualizacja:</b> 21.12.2025, 16:03:19
                </p>
            </aside>
            <aside class="infobox" id="partia">
                <h3>Księga wpisów</h3>
                <div id="latest-guestbook-entry">Ładowanie wpisu...</div>
                <hr>
                <a href="container/guestbook/index.html" style="font-weight: bold;">Zobacz wszystkie / Napisz</a>
            </aside>
            <aside class="infobox" id="bozena">
                <h3>Wspólpraca z...</h3>
                <img width="150px" height="150px" src="https://p16-pu-sign-no.tiktokcdn-eu.com/tos-no1a-avt-0068c001-no/3f1a83d4013ba1b27b6e2e4440f8934a~tplv-tiktokx-cropcenter:1080:1080.jpeg?dr=10399&refresh_token=a3ddebe6&x-expires=1766174400&x-signature=Al8bchN6Y%2BOIz8NjA%2FJ0Q3bq9Tc%3D&t=4d5b0474&ps=13740610&shp=a5d48078&shcp=81f88b70&idc=no1a" alt="Bożena Boguslawska">
                <p>Wbijaj na tikotka Bożeny Boguslawskiej!!1</p>
                <a href="https://www.tiktok.com/@bozena.boguslawska6">Kliknij tutaj</a>
            </aside>

            <script type="module"> //status wpisow
                import { db, collection, query, orderBy, limit, getDocs } from './assets/firebase-conf.js';

                async function loadLatestEntry() {
                    const container = document.getElementById('latest-guestbook-entry');
                    try {
                        const q = query(collection(db, "guestbook"), orderBy("createdAt", "desc"), limit(1));
                        const querySnapshot = await getDocs(q);
                        
                        if (querySnapshot.empty) {
                            container.innerHTML = "Brak wpisów. Bądź pierwszy!";
                            return;
                        }

                        const data = querySnapshot.docs[0].data();
                        const date = data.createdAt?.toDate().toLocaleDateString('pl-PL') || "Niedawno";
                        
                        container.innerHTML = `
                            <p><strong>${data.name}</strong> (${date})</p>
                            <p style="font-style: italic;">"${data.content.substring(0, 50)}${data.content.length > 50 ? '...' : ''}"</p>
                        `;
                    } catch (e) {
                        container.innerHTML = "Błąd ładowania.";
                        console.error(e);
                    }
                }
                loadLatestEntry();
            </script>
        </div>
    </div>
</div>


<div class="footer">
    Strona stworzona przez obywateli Imperium Lechitów. <br><br>
<img class="award" src="https://theoldnet.com/images/award.gif">
<img class="award" src="https://theoldnet.com/images/goldstar.gif">

</div>

<script src="assets/infobox.js"></script>
<script src="assets/imieniny.js"></script>
<script type="module" src="./assets/firebase-conf.js"></script>
 
<script type="module"> // ksiega wpisow
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
  import { getFirestore, collection, query, orderBy, limit, getDocs } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyB4_yXWVorjyQHf5OMIoXTUpfcyy7sJPyE",
    authDomain: "guestbook-imperium.firebaseapp.com",
    projectId: "guestbook-imperium",
    storageBucket: "guestbook-imperium.firebasestorage.app",
    messagingSenderId: "780071024560",
    appId: "1:780071024560:web:3ff011266cd83f7bd60875",
    measurementId: "G-665V4Q0410"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  async function loadLatestEntry() {
    const container = document.getElementById('latest-guestbook-entry');
    if (!container) return;

    try {
      const q = query(collection(db, "guestbook"), orderBy("createdAt", "desc"), limit(1));
      const querySnapshot = await getDocs(q);

      if (querySnapshot.empty) {
        container.innerHTML = "<p style='font-size: 11px;'>Brak wpisów.</p>";
        return;
      }

      const data = querySnapshot.docs[0].data();
      const date = data.createdAt ? data.createdAt.toDate().toLocaleString('pl-PL', {
        day: '2-digit',
        month: '2-digit',
        year: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
    }) : "Niedawno";

      container.innerHTML = `
        <div style="font-size: 12px; border-left: 3px solid #c0392b; padding-left: 10px; margin-top: 10px;">
          <strong>${data.name}</strong> <span style="font-size: 10px; color: #666;">(${date})</span><br>
          <p style="margin: 5px 0;">${data.content}</p>
        </div>
      `;
    } catch (e) {
      console.error("Błąd Firestore:", e);
      container.innerHTML = "Nie udało się połączyć z bazą.";
    }
  }

  loadLatestEntry();
</script>

<script type="module">
import { auth } from "./assets/firebase-auth.js";
import { onAuthStateChanged, signOut } 
from "https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";

const status = document.getElementById("czyzal");
const link = document.getElementById("loginlink");

onAuthStateChanged(auth, (user) => {
  if (user) {
    status.textContent = `Zalogowany jako: ${user.email}`;
    link.textContent = "Wyloguj się";
    link.href = "#";
    link.onclick = (e) => {
      e.preventDefault();
      signOut(auth);
    };
  } else {
    status.textContent = "Nie jesteś zalogowany";
    link.textContent = "Dołącz do Imperium";
    link.href = "register.html";
    link.onclick = null;
  }
});
</script>



</body>
</html>